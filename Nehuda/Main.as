/* * LeaflipSample *  * The MIT License *  * Copyright (c) <2010> SionDesign (www.sionnet.jp) *                      eqLiquid (www.eqliquid.com) *  * 以下に定める条件に従い、本ソフトウェアおよび関連文書のファイル（以下「ソフトウェア」） * の複製を取得するすべての人に対し、ソフトウェアを無制限に扱うことを無償で許可します。 * これには、ソフトウェアの複製を使用、複写、変更、結合、掲載、頒布、サブライセンス、 * および/または販売する権利、およびソフトウェアを提供する相手に同じことを許可する権利も * 無制限に含まれます。 *  * 上記の著作権表示および本許諾表示を、 * ソフトウェアのすべての複製または重要な部分に記載するものとします。 *  * ソフトウェアは「現状のまま」で、明示であるか暗黙であるかを問わず、 * 何らの保証もなく提供されます。ここでいう保証とは、商品性、特定の目的への適合性、 * および権利非侵害についての保証も含みますが、それに限定されるものではありません。 * 作者または著作権者は、契約行為、不法行為、またはそれ以外であろうと、 * ソフトウェアに起因または関連し、あるいはソフトウェアの使用またはその他の扱いによって生じる * 一切の請求、損害、その他の義務について何らの責任も負わないものとします。 */package{	import flash.display.Bitmap;	import flash.display.BitmapData;	import flash.display.Sprite;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.events.Event;	import flash.geom.Point;	import flash.geom.Rectangle;	import jp.sionnet.leaflip.Leaflip;	import jp.sionnet.leaflip.LeaflipEvent;	import flash.geom.Matrix;	//import com.flashdynamix.utils.SWFProfiler;		/**	 * Leaflip Sample 01	 * @author Takeya Kimura	 * @version 0.3Alpha	 */	public class Main extends Sprite 	{		[SWF(width="1920", height="1080", backgroundColor="0x000000", frameRate="30")]		//[Embed(source = "Nehuda.png")]		private var ImageSource01:BitmapData = new NehudaBit(0,0);		//ImageSource01 =new Nehuda(0,0);		//[Embed(source = "NehudaB.png")]		private var ImageSource02:BitmapData = new NehudaBBit(0,0);		//[Embed(source = "NehudaMiss.png")]		private var ImageSource03:BitmapData = new NehudaMissBit(0,0);		//[Embed(source = "NehudaMissB.png")]		private var ImageSource04:BitmapData = new NehudaMissBBit(0,0);								private static const PAGE_WIDTH:Number = 1280;		private static const PAGE_HEIGHT:Number = 800;		private var page01:Leaflip;		private var page02:Leaflip;		private var current:Leaflip;				private var frontSide01:Bitmap=new Bitmap();		private var backSide01:Bitmap=new Bitmap();		private var frontSide02:Bitmap=new Bitmap();		private var backSide02:Bitmap=new Bitmap();				public function Main():void 		{		trace("Main");		trace( ImageSource01 + " =ImageSource01");		trace( ImageSource02 + " =ImageSource02");		trace( ImageSource03 + " =ImageSource03");		trace( ImageSource04 + " =ImageSource04");		trace("Main");					if (stage) init();			else addEventListener(Event.ADDED_TO_STAGE, init);		}						private function init(e:Event = null):void 		{			removeEventListener(Event.ADDED_TO_STAGE, init);			// entry point						//stage.scaleMode = StageScaleMode.NO_SCALE;			//stage.align = StageAlign.TOP_LEFT;						//SWFProfiler.init(stage, this);						frontSide01.bitmapData = ImageSource01;			backSide01.bitmapData = ImageSource02;			frontSide02.bitmapData = ImageSource03;			backSide02.bitmapData = ImageSource04;						//緑とオレンジのLeaflip作成			//128pix角、マウスの反応領域は縁から24pix			page01 = new Leaflip(PAGE_WIDTH, PAGE_HEIGHT, 24);			page01.addFSP(frontSide01);			page01.addBSP(backSide01);			page02 = new Leaflip(PAGE_WIDTH, PAGE_HEIGHT, 24);			page02.addFSP(frontSide02);			page02.addBSP(backSide02);						page01.x = 1280;			page01.y = 400;			page02.x = 1280;			page02.y = 400;						//addChild(page02);			//addChild(page01);			addChild(frontSide01);					//イベント			addEventListener(LeaflipEvent.PICK, pickHandler);			addEventListener(LeaflipEvent.CLOSE_COMPLETE, closeHandler);			addEventListener(LeaflipEvent.OPEN_COMPLETE, openHandler);		}				//開き始めたら一旦ページめくりを禁止		private function pickHandler(e:LeaflipEvent):void		{			page01.allowFlip = false;			page02.allowFlip = false;		}				//閉じたら復帰		private function closeHandler(e:LeaflipEvent):void 		{			page01.allowFlip = true;			page02.allowFlip = true;		}				//開き終わったページを後ろに差し込む		private function openHandler(e:LeaflipEvent):void 		{			//ターゲットページ取得			var current:Leaflip = e.target as Leaflip;						//下に差し込んでリセット			addChildAt(current, 0);			current.alpha = 1;			current.reset();			page01.allowFlip = true;			page02.allowFlip = true;		}			}	}